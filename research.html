<!DOCTYPE html>
<html>
<title>Ray's Blog</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="images/rubiks.png">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<style>
body,h1,h2,h3,h4,h5 {font-family: "Ariel", sans-serif}
</style>
<body class="w3-light-grey">

<!-- w3-content defines a container for fixed size centered content, 
and is wrapped around the whole page content, except for the footer in this example -->
<div class="w3-content" style="max-width:1200px">

<!-- Header -->
<header class="w3-container w3-center w3-padding-32"> 
  <h1><b>Ray's Research Journal</b></h1>
  <p>Welcome to the research journal of <span class="w3-tag">Raymond Feng</span></p>
  <li><a href="index.html">Home</a></li>
</header>

<!-- Grid -->
<div class="w3-row">

<!-- Blog entries -->
<div class="w3-col l8 s12">

  <div class="w3-card-4 w3-margin w3-white">
    <img src="2.17.png" style="width:50%">
    <div class="w3-container">
      <h3><b>Downloaded singlecoil_test.tar</b></h3>
      <h5><span class="w3-opacity">February 17th, 2019</span></h5>
      <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
      <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
      </script>
      
      <ul>
        <li>Downloaded singlecoil_test.tar, SSD is too small to download the other datasets.</li>
        <li>Unzipped the TAR file</li>
        <li>Ran the supplied data_loader_sample code</li>
        <li>The SliceData class in mri_data is a wrapper, which loads in the data.</li>
        <li>SliceData objects have a __len__ function and __getitem__ function</li>
        <li>__getitem__ returns a transformed version of the data, somehow related to k-space</li>
        <li>What is a "kspace tensor"?</li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
      </ul>

      <p><button onclick="location.href='socp.html'" class="w3-button w3-padding-large w3-white w3-border"><b>READ MORE »</b></button></p>
    </div>
  </div>

  <div class="w3-card-4 w3-margin w3-white">
    <img src="git.png" style="width:10%">
    <div class="w3-container">
      <h3><b>Cloning the Git Repo, Looking at the Code</b></h3>
      <h5><span class="w3-opacity">February 14th, 2019</span></h5>
      <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
      <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
      </script>
      
      <ul>
        <li>Cloned the GitHub repo</li>
        <li>Applied for dataset access</li>
        <li>This smallest single coil test is 80GB...how do I do this...</li>
        <li>Downloading singlecoil_test.tar...eta 2 hours</li>
        <li>Looking through FAIR code</li>
        <li>Download of dataset failed multiple times</li>
      </ul>

      <p><button onclick="location.href='socp.html'" class="w3-button w3-padding-large w3-white w3-border"><b>READ MORE »</b></button></p>
    </div>
  </div>

  <div class="w3-card-4 w3-margin w3-white">
    <img src="nyu.png" style="width:10%">
    <div class="w3-container">
      <h3><b>Reading fastMRI Paper</b></h3>
      <h5><span class="w3-opacity">February 13th, 2019</span></h5>
      <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
      <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
      </script>
      <ul>
        <li>
          Want to speed up MRI to make patient experience better, cheaper. 
        </li>
        <li>
          Hardware, compressed sensing, software, parallel imaging, ML all make MRI faster. 
        </li>
        <li>
          One issue is that there is not a unified single large dataset! Can't reproduce results. 
        </li>
        <li>
          1594 volumes, 56987 slices. 10,000 knee examinations, 1.2 million slices. 
        </li>
        <li>
          Direct vs indirect imaging. MR is an indirect technique. Instead of reading spatial measurements, takes phase and frequency measurements. 
        </li>
        <li>
          Magnetic field varies with time and space, the body the produces a response, the reciever coil measures it. 
        </li>
        <li>
          Imaged body represented by Multidimensional Fourier Space known as k-space. 
        </li>
        <li>
          $\hat{m} = \mathcal{F}^{-1}(y)$ Is known as the inverse Fourier Transform. $\hat{m}$ is the noise corrupted estimate of true image $m$. 
        </li>
        <li>
          Partial Solution: Lower maximum frequency, but results in lower spatial resolution. Omit some k-space samples within a certain maximum frequency range, but this results in aliasing artifacts. Need to use reconstruction techniques in order to remove artifacts. 
        </li>
        <li>
          Parallel MR Imaging: multiple receiver coils, each producing different k-space measurement matrix. Each coil measures the different MR signal from different regions. 
        </li>
        <li>
          A mouthful: Each coil measures Fourier components of the imaged volume multiplied by a complex-valued position-dependent coil sensitivity map $S_i$. The following equation represents the measured $k$-space signal $y_i$ for coil $i$ in an array of $n_c$ coils. The multiplication is entrywise. 
        </li>
        <li>
          $\hat{m} = \mathcal{F}(S_i m)+\text{noise}$ is the equation for Parallel MR Imaging. 
        </li>
        <li>
          Nyquist-Shannon Sampling Theorem: Establishes a sufficient condition for a sample rate that permits a discrete sequence of samples to capture all of the information from a continuous-time signal of finite bandwidth. 
        </li>
        <li>
          Each coil generally sensitive in one position, and not so much in others. 
        </li>
        <li>
          Sensitivity maps known, and $k$-space sampling full $\Rightarrow$ Satisfies Nyquist sampling condition $\Rightarrow$ set of linear relations defined between $m$ and each $y_i$ defines a linear system overdetermined by a factor of $n_c$
        </li>
        <li>
          We solve this system of equations using a pseudoinverse operation, resulting in the least norm least squares reconstruction of $m$(???). This will work so long as the linear system is full rank. Reconstruction quality dependent on signal to noise ratio.  
        </li>
        <li>
          Accelerated parallel imaging: Each coil's $k$-space is undersampled. Total number of measurements across all coils exceeds the number of image voxels to be reconstructed $\Rightarrow$ unregularized least squares solution viable $\Rightarrow$ $n_c$-fold speedup. 
        </li>
        <li>
          Voxel: A pixel, but in 3-d space...kinda...?
        </li>
        <li>
          There is so much MRI specific jibber jabber in English that I don't understand...and they don't explain. 
        </li>
        <li>
          Classical MRI Reconstruction: "Solve a regularized inverse optimization problem to find the spatially resolved image from the sub-sampled k-space data"
        </li>
        <li>
          The ML approach gives us: $\hat{m}=B(y)$, where we learn the reconstruction function $B$ through sampled pair tuples $(y,m)$ drawn from a population. I am going to assume here that $y$ is the signal from the MRI process, and the $m$ is the complete reconstruction using classical (slow) techniques, $m$ is the true image. 
        </li>
        <li>
          We want to find the $B$ that minimizes expected loss over a population distribution, this is empirical loss minimization. 
        </li>        
        <li>
          $B^*=\text{argmin}_B R(B)$ where $R(B)=\mathbb{E}_{(y,m)}[L(B(y),m)]$
        </li>
        <li>
          Of course we cannot minimize actual risk, so we work with the proxy of empirical risk: $R_{empirical}(B)=\frac{1}{n_{data}}\sum_{i=1}^{n_{data}}L(B(y^{(i)}),m^{(i)})$
        </li>
        <li>
          Datasets big enough to do signal processing, but not Deep Learning. 
        </li>
        <li>
          To be continued.
        </li>
      </ul> 
    </div>
  </div>


  <!-- Blog entry -->
  <hr>
<!-- END BLOG ENTRIES -->
</div>

<!-- Introduction menu -->
<div class="w3-col l4">
  <!-- About Card -->
  <div class="w3-card w3-margin w3-margin-top">
  <img src="knee.png" style="width:100%">
  <div class="w3-container w3-white">
    <h4><b>Ray's Research</b></h4>
    <p>Mentored by Maryam Vareth, Berkeley Institute of Data Science, making MRI faster.</p>  
  </div>
  <p><button onclick="location.href='blog.html'" class="w3-button w3-padding-large w3-white w3-border"><b>Back to blog home»</b></button></p>
  </div><hr>
  
  
  <hr> 
 
  
  
<!-- END Introduction Menu -->
</div>

<!-- END GRID -->
</div><br>

<!-- END w3-content -->
</div>

</body>
</html>
